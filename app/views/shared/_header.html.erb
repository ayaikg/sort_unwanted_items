<!-- Navbar -->
<div class="collapse bg-base-200">
  <input type="checkbox" /> 
  <div class="collapse-title flex justify-between">
    <%= link_to "steteco", root_path, class: "btn btn-ghost normal-case text-xl z-40" %>
    <% if choice_page?(@category) %>
      <div class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
        </svg>
      </div>
    <% end %>
    <label for="my-drawer-3" aria-label="open sidebar" class="btn btn-ghost btn-circle avatar z-40">
      <div class="w-10 rounded-full">
        <%= image_tag current_user.avatar.url %>
      </div>
    </label>
  </div>
  <% if choice_page?(@category) %>
    <div class="collapse-content">
      <div class="flex justify-center" data-controller="autocomplete" data-autocomplete-url-value=<%= set_value(@category) %> role="combobox">
        <%= search_form_for @q_header, url: set_url(@category) do |f| %>
          <div>
            <%= f.search_field set_search_key(@category), data: { autocomplete_target: 'input'}, class: "input input-bordered md:w-96 join-items", placeholder: "キーワード検索" %>
            <%= f.hidden_field set_key(@category), data: { autocomplete_target: 'hidden' } %>
          </div>
          <ul class="list-group bg-white absolute w-full md:text-sm max-w-max" data-autocomplete-target="results"></ul>

        <% if @category.present? && current_page?(category_items_path(@category)) || current_page?(history_items_path) %>
          <div class="my-2">
            <span>通知日で検索</span>
            <%= f.date_field :notification_notify_date_gteq, class: "border" %>
              <span>~</span>
            <%= f.date_field :notification_notify_date_lteq_end_of_day, class: "border" %>
          </div>
        <% end %>
        
        <% if current_page?(posts_path) || current_page?(likes_posts_path) || current_page?(history_items_path) %>
          <div class="flex justify-around">
            <%= f.select set_listing_key, [['出品中', true], ['未出品', false]], include_blank: '出品状態で検索' %>
            <%= f.select set_diposal_key, Item.disposal_methods_i18n.except(:before).invert.map { |key, value| [key, Item.disposal_methods[value]] }, { include_blank: "処分方法で検索" } %>
          </div>
        <% end %>
          <div class="flex justify-center mt-2">
            <%= f.submit "検索する", class: "btn btn-primary px-16" %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
  