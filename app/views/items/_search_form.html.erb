<!-- スマホ版のレイアウト -->
<div class="p-2 lg:hidden" data-controller="autocomplete" data-autocomplete-url-value=<%= set_value %> role="combobox">
  <%= search_form_for @q, url: url, data: { turbo_frame: "items_list", controller: "search", action: "input->search#submit" }, class: "space-y-2" do |f| %>
    <div class="flex flex-col items-center">
      <%= f.search_field :name_cont, data: { autocomplete_target: 'input'}, class: "input input-bordered", placeholder: "キーワード検索" %>
      <%= f.hidden_field :name, data: { autocomplete_target: 'hidden' } %>
      <div class="flex justify-center">
        <ul class="list-group bg-white absolute max-w-max" data-autocomplete-target="results"></ul>
      </div>
    </div>

    <div class="flex justify-center items-center">
      <label class="label"><span class="label-text">通知日で検索</span></label>
      <%= f.date_field :notification_notify_date_gteq, class: "md:p-2.5 border" %>
        <span>~</span>
      <%= f.date_field :notification_notify_date_lteq_end_of_day, class: "md:p-2.5 border" %>
    </div>
  
    <% if current_page?(history_items_path) %>
      <details>
        <summary class="btn btn-ghost flex justify-center">
          詳細検索
        </summary>
        <div class="space-y-4">
          <p class="border-b pb-1">カテゴリーで検索</p>
          <div class="flex justify-center">
            <%= f.select :category_id_eq, grouped_options_for_select(@categories_collection), { include_blank: 'カテゴリーを選択してください' }, class: "select select-bordered" %>
          </div>
          <p class="border-b pb-1">出品状態で検索</p>
          <div class="flex justify-center items-center space-x-2">
            <div class="flex">
              <%= f.radio_button :listing_status_eq, "", class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "すべて", value: "" %>
            </div>

            <div class="flex">
              <%= f.radio_button :listing_status_eq, true, class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "出品中", value: true %>
            </div>

            <div class="flex">
              <%= f.radio_button :listing_status_eq, false, class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "未出品", value: false %>
            </div>
          </div>

          <p class="border-b pb-1">処分方法で検索</p>
          <div class="flex justify-center items-center space-x-2">
            <div class="flex">
              <%= f.radio_button :disposal_method_eq, "", class: "radio checked:bg-primary" %>
              <%= f.label :disposal_method_eq, "すべて", value: "" %>
            </div>
            <%= f.collection_radio_buttons :disposal_method_eq, Item.disposal_methods_i18n.except(:before).invert.map { |key, value| [key, Item.disposal_methods[value]] }, :last, :first do |b| %>
              <div class="flex">
                <%= b.radio_button(class: "radio checked:bg-primary") %>
                <%= b.label %>
              </div>
            <% end %>
          </div>
        </div>
      </details>
    <% end %>
  <% end %>
</div>

<!-- pc画面のレイアウト -->
<div class="hidden lg:block my-8 mx-2">
  <div class="p-5 bg-base-100 border-2 rounded-md" data-controller="autocomplete" data-autocomplete-url-value=<%= set_value %> role="combobox">
    <p class="text-center font-bold">詳細検索</p>
    <%= search_form_for @q, url: url, data: { turbo_frame: "items_list", controller: "search", action: "input->search#submit" } do |f| %>
      <div class="flex flex-col items-center my-5">
        <%= f.search_field :name_cont, data: { autocomplete_target: 'input'}, class: "input input-bordered w-[260px]", placeholder: "キーワード検索" %>
        <%= f.hidden_field :name, data: { autocomplete_target: 'hidden' } %>
        <div class="flex justify-center">
          <ul class="list-group bg-white absolute text-sm max-w-max" data-autocomplete-target="results"></ul>
        </div>
      </div>

      <div class="space-y-4">
        <% if current_page?(history_items_path) %>
          <p class="border-b pb-1">カテゴリーで検索</p>
          <%= f.select :category_id_eq, grouped_options_for_select(@categories_collection), { include_blank: 'カテゴリーを選択してください' }, class: "select select-bordered" %>
          <p class="border-b pb-1">出品状態で検索</p>
          <div class="space-y-2">
            <div class="flex">
              <%= f.radio_button :listing_status_eq, "", class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "すべて", value: "" %>
            </div>

            <div class="flex">
              <%= f.radio_button :listing_status_eq, true, class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "出品中", value: true %>
            </div>

            <div class="flex">
              <%= f.radio_button :listing_status_eq, false, class: "radio checked:bg-primary" %>
              <%= f.label :listing_status_eq, "未出品", value: false %>
            </div>
          </div>

          <p class="border-b pb-1">処分方法で検索</p>
          <div class="space-y-2">
            <div class="flex">
              <%= f.radio_button :disposal_method_eq, "", class: "radio checked:bg-primary" %>
              <%= f.label :disposal_method_eq, "すべて", value: "" %>
            </div>
            <%= f.collection_radio_buttons :disposal_method_eq, Item.disposal_methods_i18n.except(:before).invert.map { |key, value| [key, Item.disposal_methods[value]] }, :last, :first do |b| %>
              <div class="flex">
                <%= b.radio_button(class: "radio checked:bg-primary") %>
                <%= b.label %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>

      <p class="border-b pb-1 my-4">通知日で検索</p>
      <div class="flex flex-col items-center">
        <%= f.date_field :notification_notify_date_gteq, class: "p-2.5 border" %>
          <span class="flex justify-center items-center">~</span>
        <%= f.date_field :notification_notify_date_lteq_end_of_day, class: "p-2.5 border" %>
      </div>
    <% end %>
  </div>
</div>