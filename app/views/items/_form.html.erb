<%= form_with model: item, local: true do |f| %>
  <%= render 'shared/error_message', object: f.object %>
  <div>
    <div class="form-control w-full">
      <%= f.label :image, class: "mb-2" %>
      <%= f.file_field :image, onchange: "previewFileWithId(preview)", accept: "image/*" %>
      <%= f.hidden_field :image_cache %>
    </div>
    <div class="mt-3 flex justify-center">
      <%= image_tag item.image.url, id: "preview", class: "w-40" %>
    </div>
    <div class="form-control w-full mb-6 border-b border-teal-500">
      <%= f.label :name, class: "mb-2" %>
      <%= f.text_field :name, class: "input appearance-none bg-transparent border-none focus:outline-none w-full" %>
    </div>
    <div class="form-control w-full mb-6">
      <%= f.label :category_id, Category.human_attribute_name(:title), class: "mb-2" %>
      <%= f.collection_select :category_id, category, :id, :title, include_blank: "選択して下さい" %>
    </div>
    <div class="mb-6 flex justify-center">
      <%= f.radio_button :listing_status, true %>
      <%= f.label :listing_status, "出品中", value: true %>
      <%= f.radio_button :listing_status, false %>
      <%= f.label :listing_status, "未出品", value: false %>
    </div>
    <div class="form-control w-full mb-6 border-b border-teal-500">
      <%= f.label :price, class: "mb-2" %>
      <%= f.text_field :price, class: "input appearance-none bg-transparent border-none focus:outline-none w-full" %>
    </div>
    <div class="form-control mb-6">
      <%= f.fields_for :notification do |n| %>
        <%= n.label :notify_date, Notification.human_attribute_name(:notify_date), class: "mb-2" %>
        <%= n.date_field :notify_date, class: "w-full" %>
      <% end %>
    </div>
    <div class="card-actions justify-end">
      <%= f.submit class: "btn btn-primary" %>
    </div>
  </div>
<% end %>